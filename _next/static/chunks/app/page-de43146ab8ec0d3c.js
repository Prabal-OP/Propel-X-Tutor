(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{303:function(e,t,a){Promise.resolve().then(a.bind(a,5525))},5525:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(7437),l=()=>(0,s.jsx)("div",{className:"container flex h-[60px] items-center justify-center px-4 lg:h-[80px] lg:px-0",children:(0,s.jsxs)("a",{href:"/",className:"flex items-center justify-center",children:[(0,s.jsx)("img",{src:"/logopx.jpg",alt:"Logo",className:"mr-2 h-auto w-[20px] sm:w-[30px]"}),(0,s.jsx)("span",{className:"ml-2 font-sans text-lg font-bold text-blue-500",children:"Propel-X"}),(0,s.jsx)("span",{className:"ml-1 font-sans text-lg font-bold text-black",children:"Tutor"})]})}),n=a(6648),r={src:"/Propel-X-Tutor//_next/static/media/desktop-screenshot.e1096b83.png",height:1350,width:2548,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAYAAACzzX7wAAAAh0lEQVR4nGO89uZIiQirejc3q8B/RiYGRgYQ+Pfv34/ff5ke/v4/kfHhmwfpYryiM1gYWYAKmBiZmVnACj59+8Z07w9rH+P9vW+nsir/zvrP8us/EyMLSA0DOwfHP3ZWNqZ/PxmTGE/feWP7482TQ//+/AKb8OvnLwZZOZl/UqJCTN+e3ZsFABbiOOuMe0HzAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:4},i={src:"/Propel-X-Tutor//_next/static/media/screenshot-mobile.ec7d6445.png",height:1872,width:1044,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAICAYAAADeM14FAAAAgUlEQVR42g3KWwqCQBgG0H/HLawLkj0G4hKkEkKQAh90RlPnonPla14Ph8aq/PCmrnqBrB38gYb+V8hlhrEWfI134gqZ0hpaK7DFXWkUMdcJrPGYJc40yQRKp/5FO72exEXIt82AyQY1K940ruHmnUVwEWzGhbopHNUe0LEd5UOc/soNdGdCy1EfAAAAAElFTkSuQmCC",blurWidth:4,blurHeight:8},o=()=>(0,s.jsxs)("div",{className:"loader pb-1",children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]}),d=e=>{let{promptValue:t,setPromptValue:a,disabled:l,handleInitialChat:r,ageGroup:i,setAgeGroup:d}=e;return(0,s.jsxs)("form",{className:"mx-auto flex w-full flex-col items-center justify-between gap-4 sm:flex-row sm:gap-0",onSubmit:e=>{e.preventDefault(),r()},children:[(0,s.jsxs)("div",{className:"flex w-full rounded-lg border",children:[(0,s.jsx)("textarea",{placeholder:"Teach me about...",className:"block w-full resize-none rounded-l-lg border-r p-6 text-sm text-gray-900 placeholder:text-gray-400 sm:text-base",disabled:l,value:t,required:!0,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),r())},onChange:e=>a(e.target.value),rows:1}),(0,s.jsx)("div",{className:"flex items-center justify-center",children:(0,s.jsxs)("select",{id:"grade",name:"grade",className:"ring-none h-full rounded-md rounded-r-lg border-0 bg-transparent px-2 text-sm font-medium text-black focus:ring-0 sm:text-base",value:i,onChange:e=>d(e.target.value),children:[(0,s.jsx)("option",{children:"Elementary School"}),(0,s.jsx)("option",{children:"Middle School"}),(0,s.jsx)("option",{children:"High School"}),(0,s.jsx)("option",{children:"College"}),(0,s.jsx)("option",{children:"Undergrad"}),(0,s.jsx)("option",{children:"Graduate"})]})})]}),(0,s.jsxs)("button",{disabled:l,type:"submit",className:"relative flex size-[72px] w-[358px] shrink-0 items-center justify-center rounded-md bg-[linear-gradient(154deg,#2A8EF9_23.37%,#175CB6_91.91%)] disabled:pointer-events-none disabled:opacity-75 sm:ml-3 sm:w-[72px]",children:[l&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(o,{})}),(0,s.jsx)(n.default,{unoptimized:!0,src:"/up-arrow.svg",alt:"search",width:24,height:24,className:l?"invisible":""}),(0,s.jsx)("span",{className:"ml-2 font-bold text-white sm:hidden",children:"Search"})]})]})};let c=[{id:1,name:"Basketball",icon:"/basketball-new.svg"},{id:2,name:"Machine Learning",icon:"/light-new.svg"},{id:3,name:"Personal Finance",icon:"/finance.svg"},{id:4,name:"U.S History",icon:"/us.svg"}],m=(e,t)=>"\n  You are a professional interactive personal tutor who is an expert at explaining topics. Given a topic and the information to teach, please educate the user about it at a ".concat(t," level. Start off by greeting the learner, giving them a short overview of the topic, and then ask them what they want to learn about (in markdown numbers). Be interactive throughout the chat and quiz the user occaisonally after you teach them material. Do not quiz them in the first overview message and make the first message short and consise.\n\n  Here is the information to teach:\n\n  <teaching_info>\n  ","\n","\n  ").concat(e.slice(0,7).map((e,t)=>"## Webpage #".concat(t,":\n ").concat(e.fullContent," \n\n")),"\n  </teaching_info>\n\n  Here's the age group to teach at:\n\n  <age_group>\n  ").concat(t,"\n  </age_group>\n\n  Please return answer in markdown. It is very important for my career that you follow these instructions. Here is the topic to educate on:\n    ");var u=e=>{let{promptValue:t,setPromptValue:a,handleChat:l,ageGroup:o,setAgeGroup:m,handleInitialChat:u}=e,x=e=>{a(e)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mx-auto mt-10 flex max-w-3xl flex-col items-center justify-center sm:mt-36",children:[(0,s.jsxs)("h2",{className:"mt-2 bg-custom-gradient bg-clip-text text-center text-4xl font-medium tracking-tight text-gray-900 sm:text-6xl",children:["Your Personal"," ",(0,s.jsx)("span",{className:"bg-gradient-to-r from-blue-600 to-blue-500 bg-clip-text font-bold text-transparent",children:"Tutor"})]}),(0,s.jsx)("p",{className:"mt-4 text-balance text-center text-sm sm:text-base",children:"Enter a topic you want to learn about along with the education level you want to be taught at and generate a personalized tutor tailored to you!"}),(0,s.jsx)("div",{className:"mt-4 w-full pb-6",children:(0,s.jsx)(d,{promptValue:t,handleInitialChat:u,setPromptValue:a,handleChat:l,ageGroup:o,setAgeGroup:m})}),(0,s.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2.5 pb-[30px] lg:flex-nowrap lg:justify-normal",children:c.map(e=>(0,s.jsxs)("div",{className:"flex h-[35px] cursor-pointer items-center justify-center gap-[5px] rounded border border-solid border-[#C1C1C1] px-2.5 py-2 transition hover:bg-gray-200",onClick:()=>x(null==e?void 0:e.name),children:[(0,s.jsx)(n.default,{src:e.icon,alt:e.name,width:18,height:16,className:"w-[18px]"}),(0,s.jsx)("span",{className:"text-sm font-light leading-[normal] text-[#1B1B16]",children:e.name})]},e.id))})]}),(0,s.jsxs)("div",{className:"mx-auto max-w-7xl",children:[(0,s.jsx)(n.default,{src:r,alt:"hero",className:"my-32 max-w-full max-lg:hidden"}),(0,s.jsx)(n.default,{src:i,alt:"hero",className:"my-5 max-w-full lg:hidden"})]})]})};function x(e){let{sources:t,isLoading:a}=e;return(0,s.jsxs)("div",{className:"bg-white max-lg:-order-1 lg:flex lg:w-full lg:max-w-[300px] lg:flex-col",children:[(0,s.jsx)("div",{className:"flex items-start gap-4 pb-3 lg:pb-3.5",children:(0,s.jsxs)("h3",{className:"text-base font-bold uppercase leading-[152.5%] text-black",children:["sources:"," "]})}),(0,s.jsx)("div",{className:"flex w-full items-center gap-6 pb-4 max-lg:overflow-x-scroll lg:grow lg:flex-col lg:gap-4 lg:overflow-y-scroll lg:pb-0",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 sm:block"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 sm:block"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 lg:block"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 lg:block"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 lg:block"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 lg:block"}),(0,s.jsx)("div",{className:"hidden h-20 w-[260px] max-w-sm animate-pulse rounded-md bg-gray-300 lg:block"})]}):t.length>0?t.map(e=>(0,s.jsx)(h,{source:e},e.url)):(0,s.jsx)("div",{children:"Could not fetch sources."})})]})}let h=e=>{let{source:t}=e;return(0,s.jsxs)("div",{className:"flex h-[79px] w-full items-center gap-2.5 rounded-lg border border-gray-100 px-1.5 py-1 shadow-md",children:[(0,s.jsx)("div",{className:"shrink-0",children:(0,s.jsx)(n.default,{unoptimized:!0,src:"https://www.google.com/s2/favicons?domain=".concat(t.url,"&sz=128"),alt:t.url,className:"rounded-full p-1",width:36,height:36})}),(0,s.jsxs)("div",{className:"flex min-w-0 max-w-[192px] flex-col justify-center gap-1",children:[(0,s.jsx)("h6",{className:"line-clamp-2 text-xs font-light",children:t.name}),(0,s.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:t.url,className:"truncate text-xs font-light text-[#1B1B16]/30",children:t.url})]})]})};var g=a(2265),p=a(3203),f=a(8904),w=e=>{let{promptValue:t,setPromptValue:a,disabled:l,messages:r,setMessages:i,handleChat:d}=e;function c(){let e=[...r,{role:"user",content:t}];a(""),i(e),d(e)}return(0,s.jsxs)("form",{className:"mx-auto flex w-full items-center justify-between",onSubmit:e=>{e.preventDefault(),c()},children:[(0,s.jsx)("div",{className:"flex w-full rounded-lg border",children:(0,s.jsx)("textarea",{placeholder:"Follow up question",className:"block w-full resize-none rounded-l-lg border-r p-6 text-gray-900 placeholder:text-gray-400",disabled:l,value:t,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c())},required:!0,onChange:e=>a(e.target.value),rows:1})}),(0,s.jsxs)("button",{disabled:l,type:"submit",className:"relative ml-3 flex size-[72px] shrink-0 items-center justify-center rounded-md bg-[linear-gradient(154deg,#2A8EF9_23.37%,#175CB6_91.91%)] disabled:pointer-events-none disabled:opacity-75",children:[l&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsx)(o,{})}),(0,s.jsx)(n.default,{unoptimized:!0,src:"/up-arrow.svg",alt:"search",width:24,height:24,className:l?"invisible":""})]})]})},b={src:"/Propel-X-Tutor//_next/static/media/simple-logo.72d0e819.png",height:72,width:78,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAHCAYAAAA1WQxeAAAA5ElEQVR4nCWOzy4DURxGv980YhY6q/oXIVKaSaQkgzS2XoRVX4rYWlgKNhJ0QTcskYg76cKIRTPlxhgz172fNj0PcM4Ra6k8D/WytEySD5mYrGJuPmAFEDrGonXO66s7np91RH8b1JZDNFYXsbXd5HpjRsQY5/r9gRwenECpBEWWodUKsd/eg/7zKRwSxwnS9AvGlLAOCKZ8FFLFW7Ew7JDu8UnJZzpAFDXxW5Tovb6gp2s4fV8aG/Lc8OLyQfLsB47A7HSAjc2IR7cYPVB1brr143uPXS+UCogd+8z2ri8ra1H8DwwweN0uzReKAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:7};function j(e){let{messages:t,disabled:a,promptValue:l,setPromptValue:r,setMessages:i,handleChat:o,topic:d}=e,c=(0,g.useRef)(null),m=(0,g.useRef)(null),[u,x]=(0,g.useState)(!0);return(0,g.useEffect)(()=>{if(u){var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"instant"})}},[u,t]),(0,g.useEffect)(()=>{let e=m.current;if(e)return e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)};function t(){if(m.current){let{scrollTop:e,scrollHeight:t,clientHeight:a}=m.current;x(e+a>=t)}}},[]),(0,s.jsxs)("div",{className:"flex grow flex-col gap-4 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex grow flex-col overflow-hidden lg:p-4",children:[(0,s.jsxs)("p",{className:"uppercase text-gray-900",children:[(0,s.jsx)("b",{children:"Topic: "}),d]}),(0,s.jsx)("div",{ref:m,className:"mt-2 overflow-y-scroll rounded-lg border border-solid border-[#C2C2C2] bg-white px-5 lg:p-7",children:t.length>2?(0,s.jsxs)("div",{className:"prose-sm max-w-5xl lg:prose lg:max-w-full",children:[t.slice(2).map((e,t)=>"assistant"===e.role?(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)(n.default,{src:b,alt:"",className:"absolute left-0 top-0 !my-0 size-7"}),(0,s.jsx)(f.U,{className:"w-full pl-10",children:e.content})]},t):(0,s.jsx)("p",{className:"ml-auto w-fit rounded-xl bg-blue-500 p-4 font-medium text-white",children:e.content},t)),(0,s.jsx)("div",{ref:c})]}):(0,s.jsx)("div",{className:"flex w-full flex-col gap-4 py-5",children:Array.from(Array(10).keys()).map(e=>(0,s.jsx)("div",{className:"".concat(e<5&&"hidden sm:block"," h-10 animate-pulse rounded-md bg-gray-300"),style:{animationDelay:"".concat(.05*e,"s")}},e))})})]}),(0,s.jsx)("div",{className:"bg-white lg:p-4",children:(0,s.jsx)(w,{disabled:a,promptValue:l,setPromptValue:r,handleChat:o,messages:t,setMessages:i})})]})}function v(){let[e,t]=(0,g.useState)(""),[a,n]=(0,g.useState)(""),[r,i]=(0,g.useState)(!1),[o,d]=(0,g.useState)([]),[c,h]=(0,g.useState)(!1),[f,w]=(0,g.useState)([]),[b,v]=(0,g.useState)(!1),[A,y]=(0,g.useState)("Middle School"),N=async()=>{i(!0),v(!0),n(e),t(""),await C(e),v(!1)},k=async e=>{v(!0);let t=await fetch("/api/getChat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})});if(!t.ok)throw Error(t.statusText);let a=t.body;if(!a)return;let s="",l=a.getReader(),n=new TextDecoder,r=(0,p.j)(e=>{if("event"===e.type){let a=e.data;try{var t;let e=null!==(t=JSON.parse(a).text)&&void 0!==t?t:"";s+=e,w(t=>{let a=t[t.length-1];return"assistant"===a.role?[...t.slice(0,-1),{...a,content:a.content+e}]:[...t,{role:"assistant",content:e}]})}catch(e){console.error(e)}}}),i=!1;for(;!i;){let{value:e,done:t}=await l.read();i=t;let a=n.decode(e);r.feed(a)}v(!1)};async function C(e){let t,a;h(!0);let s=await fetch("/api/getSources",{method:"POST",body:JSON.stringify({question:e})});s.ok?d(t=await s.json()):d([]),h(!1);let l=await fetch("/api/getParsedSources",{method:"POST",body:JSON.stringify({sources:t})});l.ok&&(a=await l.json());let n=[{role:"system",content:m(a,A)},{role:"user",content:"".concat(e)}];w(n),await k(n)}return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{}),(0,s.jsx)("main",{className:"flex grow flex-col px-4 pb-4 ".concat(r?"overflow-hidden":""),children:r?(0,s.jsx)("div",{className:"mt-2 flex w-full grow flex-col justify-between overflow-hidden",children:(0,s.jsx)("div",{className:"flex w-full grow flex-col space-y-2 overflow-hidden",children:(0,s.jsxs)("div",{className:"mx-auto flex w-full max-w-7xl grow flex-col gap-4 overflow-hidden lg:flex-row lg:gap-10",children:[(0,s.jsx)(j,{messages:f,disabled:b,promptValue:e,setPromptValue:t,setMessages:w,handleChat:k,topic:a}),(0,s.jsx)(x,{sources:o,isLoading:c})]})})}):(0,s.jsx)(u,{promptValue:e,setPromptValue:t,handleChat:k,ageGroup:A,setAgeGroup:y,handleInitialChat:N})})]})}}},function(e){e.O(0,[173,901,971,23,744],function(){return e(e.s=303)}),_N_E=e.O()}]);